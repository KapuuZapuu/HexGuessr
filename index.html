<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>HexGuessr</title>
    
    <!-- Dark mode init: runs immediately to prevent flash -->
    <script>
        (function() {
            // Check localStorage first
            const savedTheme = localStorage.getItem('theme');
            
            let shouldBeDark = false;
            
            if (savedTheme === 'dark') {
                shouldBeDark = true;
            } else if (savedTheme === 'light') {
                shouldBeDark = false;
            } else {
                // No saved preference, check system preference
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    shouldBeDark = true;
                }
                // If can't detect or is light, shouldBeDark stays false (default light)
            }
            
            if (shouldBeDark) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>
    
    <!-- Favicons -->
    <link rel="icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">

    <link rel="stylesheet" href="styles.css">
    <script src="app.js" defer></script>
</head>
<body class="">
    <!-- Icon Generation -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
        <symbol id="icon-question" viewBox="0 0 15 15">
            <g fill="currentColor">
                <rect x="3" y="0" width="9" height="1"/><rect x="2" y="1" width="11" height="1"/><rect x="1" y="2" width="13" height="1"/><rect x="1" y="3" width="13" height="1"/><rect x="1" y="4" width="5" height="1"/><rect x="10" y="4" width="4" height="1"/><rect x="2" y="5" width="3" height="1"/><rect x="10" y="5" width="4" height="1"/><rect x="7" y="6" width="7" height="1"/><rect x="6" y="7" width="7" height="1"/><rect x="5" y="8" width="7" height="1"/><rect x="5" y="9" width="5" height="1"/><rect x="5" y="10" width="5" height="1"/><rect x="5" y="12" width="5" height="1"/><rect x="5" y="13" width="5" height="1"/><rect x="6" y="14" width="3" height="1"/>
            </g>
        </symbol>
        <symbol id="icon-copy" viewBox="0 0 15 15">
            <g fill="currentColor">
                <rect x="1" y="1" width="10" height="1"/><rect x="1" y="2" width="10" height="1"/><rect x="1" y="3" width="2" height="1"/><rect x="9" y="3" width="2" height="1"/><rect x="12" y="3" width="2" height="1"/><rect x="1" y="4" width="2" height="1"/><rect x="9" y="4" width="2" height="1"/><rect x="12" y="4" width="2" height="1"/><rect x="1" y="5" width="2" height="1"/><rect x="9" y="5" width="2" height="1"/><rect x="12" y="5" width="2" height="1"/><rect x="1" y="6" width="2" height="1"/><rect x="9" y="6" width="2" height="1"/><rect x="12" y="6" width="2" height="1"/><rect x="1" y="7" width="2" height="1"/><rect x="9" y="7" width="2" height="1"/><rect x="12" y="7" width="2" height="1"/><rect x="1" y="8" width="2" height="1"/><rect x="9" y="8" width="2" height="1"/><rect x="12" y="8" width="2" height="1"/><rect x="1" y="9" width="10" height="1"/><rect x="12" y="9" width="2" height="1"/><rect x="1" y="10" width="10" height="1"/><rect x="12" y="10" width="2" height="1"/><rect x="12" y="11" width="2" height="1"/><rect x="3" y="12" width="11" height="1"/><rect x="3" y="13" width="11" height="1"/>
            </g>
        </symbol>
        <symbol id="icon-paste" viewBox="0 0 15 15">
            <g fill="currentColor">
                <rect x="6" y="0" width="3" height="1"/><rect x="5" y="1" width="2" height="1"/><rect x="8" y="1" width="2" height="1"/><rect x="3" y="2" width="9" height="1"/><rect x="2" y="3" width="2" height="1"/><rect x="11" y="3" width="2" height="1"/><rect x="2" y="4" width="1" height="1"/><rect x="12" y="4" width="1" height="1"/><rect x="2" y="5" width="1" height="1"/><rect x="4" y="5" width="7" height="1"/><rect x="12" y="5" width="1" height="1"/><rect x="2" y="6" width="1" height="1"/><rect x="12" y="6" width="1" height="1"/><rect x="2" y="7" width="1" height="1"/><rect x="4" y="7" width="7" height="1"/><rect x="12" y="7" width="1" height="1"/><rect x="2" y="8" width="1" height="1"/><rect x="12" y="8" width="1" height="1"/><rect x="2" y="9" width="1" height="1"/><rect x="4" y="9" width="7" height="1"/><rect x="12" y="9" width="1" height="1"/><rect x="2" y="10" width="1" height="1"/><rect x="12" y="10" width="1" height="1"/><rect x="2" y="11" width="1" height="1"/><rect x="4" y="11" width="7" height="1"/><rect x="12" y="11" width="1" height="1"/><rect x="2" y="12" width="1" height="1"/><rect x="12" y="12" width="1" height="1"/><rect x="2" y="13" width="2" height="1"/><rect x="11" y="13" width="2" height="1"/><rect x="3" y="14" width="9" height="1"/>
            </g>
        </symbol>
        <symbol id="icon-stats" viewBox="0 0 15 15">
            <g fill="currentColor">
                <rect x="8" y="0" width="3" height="1"/><rect x="8" y="1" width="3" height="1"/><rect x="8" y="2" width="3" height="1"/><rect x="4" y="3" width="3" height="1"/><rect x="8" y="3" width="3" height="1"/><rect x="4" y="4" width="3" height="1"/><rect x="8" y="4" width="3" height="1"/><rect x="4" y="5" width="3" height="1"/><rect x="8" y="5" width="3" height="1"/><rect x="4" y="6" width="3" height="1"/><rect x="8" y="6" width="3" height="1"/><rect x="0" y="7" width="3" height="1"/><rect x="4" y="7" width="3" height="1"/><rect x="8" y="7" width="3" height="1"/><rect x="0" y="8" width="3" height="1"/><rect x="4" y="8" width="3" height="1"/><rect x="8" y="8" width="3" height="1"/><rect x="0" y="9" width="3" height="1"/><rect x="4" y="9" width="3" height="1"/><rect x="8" y="9" width="3" height="1"/><rect x="12" y="9" width="3" height="1"/><rect x="0" y="10" width="3" height="1"/><rect x="4" y="10" width="3" height="1"/><rect x="8" y="10" width="3" height="1"/><rect x="12" y="10" width="3" height="1"/><rect x="0" y="11" width="3" height="1"/><rect x="4" y="11" width="3" height="1"/><rect x="8" y="11" width="3" height="1"/><rect x="12" y="11" width="3" height="1"/><rect x="0" y="12" width="3" height="1"/><rect x="4" y="12" width="3" height="1"/><rect x="8" y="12" width="3" height="1"/><rect x="12" y="12" width="3" height="1"/><rect x="0" y="13" width="3" height="1"/><rect x="4" y="13" width="3" height="1"/><rect x="8" y="13" width="3" height="1"/><rect x="12" y="13" width="3" height="1"/><rect x="0" y="14" width="3" height="1"/><rect x="4" y="14" width="3" height="1"/><rect x="8" y="14" width="3" height="1"/><rect x="12" y="14" width="3" height="1"/>
            </g>
        </symbol>
        <symbol id="icon-darkmode" viewBox="0 0 15 15">
            <g fill="currentColor">
                <rect x="5" y="0" width="3" height="1"/><rect x="3" y="1" width="3" height="1"/><rect x="2" y="2" width="3" height="1"/><rect x="1" y="3" width="4" height="1"/><rect x="1" y="4" width="3" height="1"/><rect x="0" y="5" width="4" height="1"/><rect x="0" y="6" width="4" height="1"/><rect x="0" y="7" width="5" height="1"/><rect x="14" y="7" width="1" height="1"/><rect x="0" y="8" width="5" height="1"/><rect x="14" y="8" width="1" height="1"/><rect x="0" y="9" width="6" height="1"/><rect x="13" y="9" width="2" height="1"/><rect x="1" y="10" width="7" height="1"/><rect x="11" y="10" width="3" height="1"/><rect x="1" y="11" width="13" height="1"/><rect x="2" y="12" width="11" height="1"/><rect x="3" y="13" width="9" height="1"/><rect x="5" y="14" width="5" height="1"/>
            </g>
        </symbol>
        <symbol id="icon-lightmode" viewBox="0 0 15 15">
            <g fill="currentColor">
                <rect x="7" y="0" width="1" height="1"/><rect x="1" y="1" width="1" height="1"/><rect x="7" y="1" width="1" height="1"/><rect x="13" y="1" width="1" height="1"/><rect x="2" y="2" width="1" height="1"/><rect x="12" y="2" width="1" height="1"/><rect x="6" y="3" width="3" height="1"/><rect x="4" y="4" width="7" height="1"/><rect x="4" y="5" width="7" height="1"/><rect x="3" y="6" width="9" height="1"/><rect x="0" y="7" width="2" height="1"/><rect x="3" y="7" width="9" height="1"/><rect x="13" y="7" width="2" height="1"/><rect x="3" y="8" width="9" height="1"/><rect x="4" y="9" width="7" height="1"/><rect x="4" y="10" width="7" height="1"/><rect x="6" y="11" width="3" height="1"/><rect x="2" y="12" width="1" height="1"/><rect x="12" y="12" width="1" height="1"/><rect x="1" y="13" width="1" height="1"/><rect x="7" y="13" width="1" height="1"/><rect x="13" y="13" width="1" height="1"/><rect x="7" y="14" width="1" height="1"/>
            </g>
        </symbol>
        <symbol id="icon-cancel" viewBox="0 0 15 15">
            <g fill="currentColor">
                <rect x="1" y="1" width="2" height="1"/><rect x="12" y="1" width="2" height="1"/><rect x="1" y="2" width="3" height="1"/><rect x="11" y="2" width="3" height="1"/><rect x="2" y="3" width="3" height="1"/><rect x="10" y="3" width="3" height="1"/><rect x="3" y="4" width="3" height="1"/><rect x="9" y="4" width="3" height="1"/><rect x="4" y="5" width="3" height="1"/><rect x="8" y="5" width="3" height="1"/><rect x="5" y="6" width="5" height="1"/><rect x="6" y="7" width="3" height="1"/> <rect x="5" y="8" width="5" height="1"/><rect x="4" y="9" width="3" height="1"/><rect x="8" y="9" width="3" height="1"/><rect x="3" y="10" width="3" height="1"/><rect x="9" y="10" width="3" height="1"/><rect x="2" y="11" width="3" height="1"/><rect x="10" y="11" width="3" height="1"/><rect x="1" y="12" width="3" height="1"/><rect x="11" y="12" width="3" height="1"/><rect x="1" y="13" width="2" height="1"/><rect x="12" y="13" width="2" height="1"/>
            </g>
        </symbol>
    </svg>
    <!-- /Icon Generation -->

    <div class="layout-container">
        <header class="game-header">
            <!-- mode selector buttons -->
            <div class="mode-container">
                <a class="mode-btn" href="/">Daily</a>
                <a class="mode-btn" href="/unlimited">Unlimited</a>
            </div>

<pre class="ascii-title">
██╗  ██╗███████╗██╗  ██╗ ██████╗ ██╗   ██╗███████╗███████╗███████╗██████╗ 
██║  ██║██╔════╝╚██╗██╔╝██╔════╝ ██║   ██║██╔════╝██╔════╝██╔════╝██╔══██╗
███████║█████╗   ╚███╔╝ ██║  ███╗██║   ██║█████╗  ███████╗███████╗██████╔╝
██╔══██║██╔══╝   ██╔██╗ ██║   ██║██║   ██║██╔══╝  ╚════██║╚════██║██╔══██╗
██║  ██║███████╗██╔╝ ██╗╚██████╔╝╚██████╔╝███████╗███████║███████║██║  ██║
╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚══════╝╚══════╝╚══════╝╚═╝  ╚═╝
</pre>

            <div class="top-controls">

                <!-- Help / Instructions -->
                <button id="infoButton" class="icon-btn has-tooltip" aria-label="How To Play"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-question"></use></svg></button>

                <!-- Stats (if you have a stats panel) -->
                <button id="statsButton" class="icon-btn has-tooltip" aria-label="Stats"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-stats"></use></svg></button>

                <!-- Dark‑mode toggle -->
                <button id="darkModeToggle" class="icon-btn has-tooltip" aria-label="Dark Mode"><svg class="icon icon--moon" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-darkmode"></use></svg><svg class="icon icon--sun" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-lightmode"></use></svg></button>
            </div>
        </header>        

        <div class="game-container">   
            <div class="color-game-section">
                <div class="custom-color-picker">
                    <div class="color-display hidden" id="colorDisplay">
                        Click to reveal color!
                    </div>
                    
                    <div class="color-picker-main">                
                        <div class="color-canvas" id="colorCanvas">
                            <div class="canvas-cursor" id="canvasCursor"></div>
                        </div>
                        
                        <div class="hue-slider" id="hueSlider">
                            <div class="hue-cursor" id="hueCursor"></div>
                        </div>
                        
                        <div class="color-controls">
                            <div class="color-preview" id="colorPreview"></div>
                            
                            <div class="hex-input-container">
                                <span class="hex-prefix">#</span>
                                <input type="text" id="hexInputField" class="hex-input-field" value="FF5733" maxlength="6">
                                <button id="copyBtn" class="hex-copy-btn has-tooltip" aria-label="Copy"><svg class="icon icon--sm" viewBox="0 0 24 24" aria-hidden="true"><use href="#icon-copy"></use></svg></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="timer-bar" id="timerBar">
                <div class="timer-fill" id="timerFill"></div>
                <div class="timer-text" id="timerText">Color reveal will be visible for 1.0s</div>
            </div>

            <div class="input-section">
                <div class="hex-grid-wrapper">
                    <div id="hexGrid" class="hex-grid" aria-label="Hex guess grid"></div>
                    <div style="font-family: var(--ps2p-stack); font-size: 12px;">
                        <div id="hexKeyboard" class="hex-keyboard" aria-label="On-screen hex keyboard">
                            <div class="keyboard-row">
                                <button class="key-btn" data-key="0">0</button>
                                <button class="key-btn" data-key="1">1</button>
                                <button class="key-btn" data-key="2">2</button>
                                <button class="key-btn" data-key="3">3</button>
                                <button class="key-btn" data-key="4">4</button>
                                <button class="key-btn" data-key="5">5</button>
                                <button class="key-btn" data-key="6">6</button>
                                <button class="key-btn" data-key="7">7</button>
                                <button class="key-btn" data-key="8">8</button>
                                <button class="key-btn" data-key="9">9</button>
                            </div>
                            <div class="keyboard-row">
                                <button class="key-btn wide-key" data-action="enter">ENTER</button>
                                <button class="key-btn" data-key="A">A</button>
                                <button class="key-btn" data-key="B">B</button>
                                <button class="key-btn" data-key="C">C</button>
                                <button class="key-btn" data-key="D">D</button>
                                <button class="key-btn" data-key="E">E</button>
                                <button class="key-btn" data-key="F">F</button>
                                <button class="key-btn wide-key" data-action="backspace">DEL</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="guesses-container" id="guessesContainer"></div>
        </div>
    </div>

    <!-- Reusable Modal -->
    <div id="modal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div id="modalBody" class="modal-body">
                <!-- Dynamic content with close button will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Footer -->
    <footer class="site-footer">
        <img src="favicon.png" alt="HexGuessr Logo" class="footer-logo">
        <span class="footer-text">A game by <a href="https://github.com/kapuuzapuu/" target="_blank" rel="noopener noreferrer">KapuuZapuu</a></span>
    </footer>
    
</body>
</html>